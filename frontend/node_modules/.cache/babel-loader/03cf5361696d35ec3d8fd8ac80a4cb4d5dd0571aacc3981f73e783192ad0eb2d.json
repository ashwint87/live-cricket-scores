{"ast":null,"code":"import React,{useEffect,useRef,useState}from'react';import{useSchedule}from'./../../context/ScheduleContext';import{liveStatuses,upcomingMatchStatuses,completedMatchStatuses}from'./../../constants/matchStatusConstants';import MatchCard from'./../MatchCard';import'./css/FeaturedMatches.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const FeaturedMatches=()=>{const{matches=[],loading}=useSchedule();const[liveMatches,setLiveMatches]=useState([]);const[upcomingMatches,setUpcomingMatches]=useState([]);const[completedMatches,setCompletedMatches]=useState([]);const[stages,setStages]=useState([]);const[activeStage,setActiveStage]=useState(null);const[pageCount,setPageCount]=useState(0);const[currentPage,setCurrentPage]=useState(0);const scrollRef=useRef();useEffect(()=>{if(loading||!Array.isArray(matches))return;const now=new Date();const live=matches.filter(m=>liveStatuses.includes(m.status));const upcoming=matches.filter(m=>upcomingMatchStatuses.includes(m.status)).sort((a,b)=>new Date(a.starting_at)-new Date(b.starting_at)).slice(0,10);const completed=matches.filter(m=>{const matchDate=new Date(m.starting_at);return completedMatchStatuses.includes(m.status)&&now-matchDate<=2*24*60*60*1000;});const allStages=Array.from(new Set(matches.map(m=>{var _m$stage;return(_m$stage=m.stage)===null||_m$stage===void 0?void 0:_m$stage.name;}).filter(Boolean)));setLiveMatches(live);setUpcomingMatches(upcoming);setCompletedMatches(completed);setStages(allStages);},[matches,loading]);const filterByStage=match=>{var _match$stage;if(!activeStage)return true;return((_match$stage=match.stage)===null||_match$stage===void 0?void 0:_match$stage.name)===activeStage;};const allFilteredMatches=[...liveMatches.filter(filterByStage),...upcomingMatches.filter(filterByStage),...completedMatches.filter(filterByStage)];useEffect(()=>{const container=scrollRef.current;if(!container)return;const handleResize=()=>{const totalScrollWidth=container.scrollWidth;const visibleWidth=container.clientWidth;const totalPages=Math.ceil(totalScrollWidth/visibleWidth);setPageCount(totalPages);};const handleScroll=()=>{const scrollLeft=container.scrollLeft;const page=Math.round(scrollLeft/container.clientWidth);setCurrentPage(page);};container.addEventListener('scroll',handleScroll);window.addEventListener('resize',handleResize);handleResize();return()=>{container.removeEventListener('scroll',handleScroll);window.removeEventListener('resize',handleResize);};},[allFilteredMatches]);return/*#__PURE__*/_jsxs(\"div\",{className:\"featured-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"featured-tabs-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"featured-tabs-left\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"tab \".concat(!activeStage?'active-tab':''),onClick:()=>setActiveStage(null),children:\"All Featured Matches\"}),stages.filter(stage=>[...liveMatches,...upcomingMatches,...completedMatches].some(m=>{var _m$stage2;return((_m$stage2=m.stage)===null||_m$stage2===void 0?void 0:_m$stage2.name)===stage;})).map(stage=>/*#__PURE__*/_jsx(\"span\",{className:\"tab \".concat(activeStage===stage?'active-tab':''),onClick:()=>setActiveStage(stage),children:stage},stage))]}),/*#__PURE__*/_jsx(\"a\",{href:\"/schedule\",className:\"see-all-btn\",children:\"All\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"match-cards-scroll-wrapper\",ref:scrollRef,children:/*#__PURE__*/_jsx(\"div\",{className:\"match-cards-scroll \".concat(allFilteredMatches.length<3?'center':''),children:allFilteredMatches.map(match=>/*#__PURE__*/_jsx(MatchCard,{match:match},match.id))})}),/*#__PURE__*/_jsx(\"div\",{className:\"pagination-dots\",children:Array.from({length:Math.max(1,pageCount-1)}).map((_,i)=>/*#__PURE__*/_jsx(\"span\",{className:\"dot \".concat(i===currentPage?'active':'')},i))})]});};export default FeaturedMatches;","map":{"version":3,"names":["React","useEffect","useRef","useState","useSchedule","liveStatuses","upcomingMatchStatuses","completedMatchStatuses","MatchCard","jsx","_jsx","jsxs","_jsxs","FeaturedMatches","matches","loading","liveMatches","setLiveMatches","upcomingMatches","setUpcomingMatches","completedMatches","setCompletedMatches","stages","setStages","activeStage","setActiveStage","pageCount","setPageCount","currentPage","setCurrentPage","scrollRef","Array","isArray","now","Date","live","filter","m","includes","status","upcoming","sort","a","b","starting_at","slice","completed","matchDate","allStages","from","Set","map","_m$stage","stage","name","Boolean","filterByStage","match","_match$stage","allFilteredMatches","container","current","handleResize","totalScrollWidth","scrollWidth","visibleWidth","clientWidth","totalPages","Math","ceil","handleScroll","scrollLeft","page","round","addEventListener","window","removeEventListener","className","children","concat","onClick","some","_m$stage2","href","ref","length","id","max","_","i"],"sources":["/Users/ashwin.r1/Downloads/sportmonks-api-cricket-website/frontend/src/components/home/FeaturedMatches.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { useSchedule } from './../../context/ScheduleContext';\nimport {\n  liveStatuses,\n  upcomingMatchStatuses,\n  completedMatchStatuses,\n} from './../../constants/matchStatusConstants';\nimport MatchCard from './../MatchCard';\nimport './css/FeaturedMatches.css';\n\nconst FeaturedMatches = () => {\n  const { matches = [], loading } = useSchedule();\n  const [liveMatches, setLiveMatches] = useState([]);\n  const [upcomingMatches, setUpcomingMatches] = useState([]);\n  const [completedMatches, setCompletedMatches] = useState([]);\n  const [stages, setStages] = useState([]);\n  const [activeStage, setActiveStage] = useState(null);\n  const [pageCount, setPageCount] = useState(0);\n  const [currentPage, setCurrentPage] = useState(0);\n  const scrollRef = useRef();\n\n  useEffect(() => {\n    if (loading || !Array.isArray(matches)) return;\n\n    const now = new Date();\n\n    const live = matches.filter(m => liveStatuses.includes(m.status));\n    const upcoming = matches\n      .filter(m => upcomingMatchStatuses.includes(m.status))\n      .sort((a, b) => new Date(a.starting_at) - new Date(b.starting_at))\n      .slice(0, 10);\n    const completed = matches.filter(m => {\n      const matchDate = new Date(m.starting_at);\n      return (\n        completedMatchStatuses.includes(m.status) &&\n        now - matchDate <= 2 * 24 * 60 * 60 * 1000\n      );\n    });\n\n    const allStages = Array.from(\n      new Set(matches.map(m => m.stage?.name).filter(Boolean))\n    );\n\n    setLiveMatches(live);\n    setUpcomingMatches(upcoming);\n    setCompletedMatches(completed);\n    setStages(allStages);\n  }, [matches, loading]);\n\n  const filterByStage = (match) => {\n    if (!activeStage) return true;\n    return match.stage?.name === activeStage;\n  };\n\n  const allFilteredMatches = [\n    ...liveMatches.filter(filterByStage),\n    ...upcomingMatches.filter(filterByStage),\n    ...completedMatches.filter(filterByStage),\n  ];\n\n  useEffect(() => {\n    const container = scrollRef.current;\n    if (!container) return;\n\n    const handleResize = () => {\n      const totalScrollWidth = container.scrollWidth;\n      const visibleWidth = container.clientWidth;\n      const totalPages = Math.ceil(totalScrollWidth / visibleWidth);\n      setPageCount(totalPages);\n    };\n\n    const handleScroll = () => {\n      const scrollLeft = container.scrollLeft;\n      const page = Math.round(scrollLeft / container.clientWidth);\n      setCurrentPage(page);\n    };\n\n    container.addEventListener('scroll', handleScroll);\n    window.addEventListener('resize', handleResize);\n    handleResize();\n\n    return () => {\n      container.removeEventListener('scroll', handleScroll);\n      window.removeEventListener('resize', handleResize);\n    };\n  }, [allFilteredMatches]);\n\n  return (\n    <div className=\"featured-container\">\n      <div className=\"featured-tabs-row\">\n        <div className=\"featured-tabs-left\">\n          <span\n            className={`tab ${!activeStage ? 'active-tab' : ''}`}\n            onClick={() => setActiveStage(null)}\n          >\n            All Featured Matches\n          </span>\n\n          {stages\n            .filter(stage =>\n              [...liveMatches, ...upcomingMatches, ...completedMatches].some(\n                m => m.stage?.name === stage\n              )\n            )\n            .map(stage => (\n              <span\n                key={stage}\n                className={`tab ${activeStage === stage ? 'active-tab' : ''}`}\n                onClick={() => setActiveStage(stage)}\n              >\n                {stage}\n              </span>\n          ))}\n        </div>\n        <a href=\"/schedule\" className=\"see-all-btn\">All</a>\n      </div>\n\n      <div className=\"match-cards-scroll-wrapper\" ref={scrollRef}>\n        <div className={`match-cards-scroll ${allFilteredMatches.length < 3 ? 'center' : ''}`}>\n          {allFilteredMatches.map(match => (\n            <MatchCard key={match.id} match={match} />\n          ))}\n        </div>\n      </div>\n\n      <div className=\"pagination-dots\">\n        {Array.from({ length: Math.max(1, pageCount - 1) }).map((_, i) => (\n          <span\n            key={i}\n            className={`dot ${i === currentPage ? 'active' : ''}`}\n          />\n        ))}\n      </div>\n\n    </div>\n  );\n};\n\nexport default FeaturedMatches;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}