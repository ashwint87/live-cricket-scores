{"ast":null,"code":"import _objectSpread from\"/Users/ashwin.r1/Downloads/sportmonks-api-cricket-website/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import axios from'axios';import{getTeamName,getBattingTeamIdByScoreboard}from'./../../utils/matchUtils';import'./css/PartnershipTab.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function PartnershipTab(_ref){let{matchId,matchInfo}=_ref;const[activeInning,setActiveInning]=useState(null);const[innings,setInnings]=useState([]);const data=matchInfo||{};useEffect(()=>{const scoreboards=data.scoreboards||[];const uniqueInnings=[...new Set(scoreboards.map(s=>s.scoreboard))];setInnings(uniqueInnings);if(uniqueInnings.length>0){setActiveInning(uniqueInnings[0]);}},[matchInfo]);useEffect(()=>{if(innings.length>0){setActiveInning(innings[0]);}},[innings]);const balls=data.balls||[];const batting=data.batting||[];const handleTabClick=sb=>setActiveInning(sb);const generatePartnerships=inningKey=>{const inningBalls=balls.filter(ball=>ball.scoreboard===inningKey).sort((a,b)=>parseFloat(a.ball)-parseFloat(b.ball));const partnerships=[];let current={batsmen:[],runs:0,balls:0,dismissal:null};const addPartnership=()=>{if(current.batsmen.length===2||current.batsmen.length===1){partnerships.push(_objectSpread({},current));}};for(const ball of inningBalls){var _ball$batsman,_ball$score,_ball$dismissal,_ball$batsman2;const striker=(_ball$batsman=ball.batsman)===null||_ball$batsman===void 0?void 0:_ball$batsman.fullname;if(!striker)continue;if(!current.batsmen.includes(striker)){if(current.batsmen.length===2){addPartnership();current={batsmen:[striker],runs:0,balls:0,dismissal:null};}else{current.batsmen.push(striker);}}const score=parseInt(((_ball$score=ball.score)===null||_ball$score===void 0?void 0:_ball$score.runs)||0);current.runs+=score;current.balls+=1;if((_ball$dismissal=ball.dismissal)!==null&&_ball$dismissal!==void 0&&_ball$dismissal.dismissal_type&&ball.batsman_out_id===((_ball$batsman2=ball.batsman)===null||_ball$batsman2===void 0?void 0:_ball$batsman2.id)){current.dismissal=ball.dismissal.dismissal_type;addPartnership();current={batsmen:[],runs:0,balls:0,dismissal:null};}}// Add final ongoing partnership if any\nif(current.batsmen.length>=1){partnerships.push(current);}return partnerships;};if(!matchInfo)return/*#__PURE__*/_jsx(\"div\",{children:\"No partnerships available at the moment.\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"partnership-tab\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tabs\",children:innings.map(inningKey=>/*#__PURE__*/_jsx(\"button\",{className:activeInning===inningKey?'active':'',onClick:()=>handleTabClick(inningKey),children:getTeamName(getBattingTeamIdByScoreboard(inningKey,batting),data)},inningKey))}),activeInning&&/*#__PURE__*/_jsxs(\"div\",{className:\"partnership-table\",children:[/*#__PURE__*/_jsx(\"h3\",{children:getTeamName(getBattingTeamIdByScoreboard(activeInning,batting),data)}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Batsmen\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Runs\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Balls\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:generatePartnerships(activeInning).map((p,i)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:p.batsmen.join(' & ')}),/*#__PURE__*/_jsx(\"td\",{children:p.runs}),/*#__PURE__*/_jsx(\"td\",{children:p.balls})]},i))})]})]})]});}","map":{"version":3,"names":["React","useEffect","useState","axios","getTeamName","getBattingTeamIdByScoreboard","jsx","_jsx","jsxs","_jsxs","PartnershipTab","_ref","matchId","matchInfo","activeInning","setActiveInning","innings","setInnings","data","scoreboards","uniqueInnings","Set","map","s","scoreboard","length","balls","batting","handleTabClick","sb","generatePartnerships","inningKey","inningBalls","filter","ball","sort","a","b","parseFloat","partnerships","current","batsmen","runs","dismissal","addPartnership","push","_objectSpread","_ball$batsman","_ball$score","_ball$dismissal","_ball$batsman2","striker","batsman","fullname","includes","score","parseInt","dismissal_type","batsman_out_id","id","children","className","onClick","p","i","join"],"sources":["/Users/ashwin.r1/Downloads/sportmonks-api-cricket-website/frontend/src/components/match/PartnershipTab.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { getTeamName, getBattingTeamIdByScoreboard } from './../../utils/matchUtils';\nimport './css/PartnershipTab.css';\n\nexport default function PartnershipTab({ matchId, matchInfo }) {\n  const [activeInning, setActiveInning] = useState(null);\n  const [innings, setInnings] = useState([]);\n\n  const data = matchInfo || {};\n\n  useEffect(() => {\n    const scoreboards = data.scoreboards || [];\n    const uniqueInnings = [...new Set(scoreboards.map(s => s.scoreboard))];\n    setInnings(uniqueInnings);\n    if (uniqueInnings.length > 0) {\n      setActiveInning(uniqueInnings[0]);\n    }\n  }, [matchInfo]);\n\n  useEffect(() => {\n    if (innings.length > 0) {\n      setActiveInning(innings[0]);\n    }\n  }, [innings]);\n\n  const balls = data.balls || [];\n  const batting = data.batting || [];\n\n  const handleTabClick = (sb) => setActiveInning(sb);\n\n  const generatePartnerships = (inningKey) => {\n    const inningBalls = balls\n      .filter(ball => ball.scoreboard === inningKey)\n      .sort((a, b) => parseFloat(a.ball) - parseFloat(b.ball));\n\n    const partnerships = [];\n    let current = {\n      batsmen: [],\n      runs: 0,\n      balls: 0,\n      dismissal: null,\n    };\n\n    const addPartnership = () => {\n      if (current.batsmen.length === 2 || current.batsmen.length === 1) {\n        partnerships.push({ ...current });\n      }\n    };\n\n    for (const ball of inningBalls) {\n      const striker = ball.batsman?.fullname;\n      if (!striker) continue;\n\n      if (!current.batsmen.includes(striker)) {\n        if (current.batsmen.length === 2) {\n          addPartnership();\n          current = {\n            batsmen: [striker],\n            runs: 0,\n            balls: 0,\n            dismissal: null,\n          };\n        } else {\n          current.batsmen.push(striker);\n        }\n      }\n\n      const score = parseInt(ball.score?.runs || 0);\n      current.runs += score;\n      current.balls += 1;\n\n      if (ball.dismissal?.dismissal_type && ball.batsman_out_id === ball.batsman?.id) {\n        current.dismissal = ball.dismissal.dismissal_type;\n        addPartnership();\n        current = {\n          batsmen: [],\n          runs: 0,\n          balls: 0,\n          dismissal: null,\n        };\n      }\n    }\n\n    // Add final ongoing partnership if any\n    if (current.batsmen.length >= 1) {\n      partnerships.push(current);\n    }\n\n    return partnerships;\n  };\n\n  if (!matchInfo) return <div>No partnerships available at the moment.</div>;\n\n  return (\n    <div className=\"partnership-tab\">\n      <div className=\"tabs\">\n        {innings.map(inningKey => (\n          <button\n            key={inningKey}\n            className={activeInning === inningKey ? 'active' : ''}\n            onClick={() => handleTabClick(inningKey)}\n          >\n            {getTeamName(getBattingTeamIdByScoreboard(inningKey, batting), data)}\n          </button>\n        ))}\n      </div>\n\n      {activeInning && (\n        <div className=\"partnership-table\">\n          <h3>{getTeamName(getBattingTeamIdByScoreboard(activeInning, batting), data)}</h3>\n          <table>\n            <thead>\n              <tr>\n                <th>Batsmen</th>\n                <th>Runs</th>\n                <th>Balls</th>\n              </tr>\n            </thead>\n            <tbody>\n              {generatePartnerships(activeInning).map((p, i) => (\n                <tr key={i}>\n                  <td>{p.batsmen.join(' & ')}</td>\n                  <td>{p.runs}</td>\n                  <td>{p.balls}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </div>\n  );\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}