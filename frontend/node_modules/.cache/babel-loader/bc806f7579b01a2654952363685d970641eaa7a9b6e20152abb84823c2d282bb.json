{"ast":null,"code":"import _objectSpread from\"/Users/ashwin.r1/Downloads/sportmonks-api-cricket-website/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import axios from'axios';import{useSeriesMatchList}from'./../../context/SeriesMatchListContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function SeriesSquadsTab(){const{seriesMatches,loadingMatches}=useSeriesMatchList();const[teams,setTeams]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{if(loadingMatches||!seriesMatches.length)return;let isMounted=true;const seenTeams=new Map();const fetchSquads=async()=>{try{for(const match of seriesMatches){const seasonId=match.season_id;const teamsToFetch=[match.localteam,match.visitorteam];for(const team of teamsToFetch){if(!seenTeams.has(team.id)){try{var _res$data,_res$data$data;const res=await axios.get(\"/api/teams/\".concat(team.id,\"/squad/\").concat(seasonId));const squadArray=((_res$data=res.data)===null||_res$data===void 0?void 0:(_res$data$data=_res$data.data)===null||_res$data$data===void 0?void 0:_res$data$data.squad)||[];seenTeams.set(team.id,_objectSpread(_objectSpread({},team),{},{squad:squadArray}));}catch(_unused){seenTeams.set(team.id,_objectSpread(_objectSpread({},team),{},{squad:[]}));}}}}if(isMounted)setTeams(Array.from(seenTeams.values()));}catch(err){console.error('Error loading squads',err);}finally{setLoading(false);}};fetchSquads();return()=>{isMounted=false;};},[seriesMatches,loadingMatches]);return/*#__PURE__*/_jsx(\"div\",{children:loading||loadingMatches?/*#__PURE__*/_jsx(\"p\",{children:\"Loading squads...\"}):teams.map(team=>/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"h4\",{children:team.name}),Array.isArray(team.squad)&&team.squad.map(player=>/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u2013 \",player.fullname]},player.id))]},team.id))});}","map":{"version":3,"names":["React","useEffect","useState","axios","useSeriesMatchList","jsx","_jsx","jsxs","_jsxs","SeriesSquadsTab","seriesMatches","loadingMatches","teams","setTeams","loading","setLoading","length","isMounted","seenTeams","Map","fetchSquads","match","seasonId","season_id","teamsToFetch","localteam","visitorteam","team","has","id","_res$data","_res$data$data","res","get","concat","squadArray","data","squad","set","_objectSpread","_unused","Array","from","values","err","console","error","children","map","style","marginBottom","name","isArray","player","fullname"],"sources":["/Users/ashwin.r1/Downloads/sportmonks-api-cricket-website/frontend/src/components/series/SeriesSquadsTab.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useSeriesMatchList } from './../../context/SeriesMatchListContext';\n\nexport default function SeriesSquadsTab() {\n  const { seriesMatches, loadingMatches } = useSeriesMatchList();\n  const [teams, setTeams] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (loadingMatches || !seriesMatches.length) return;\n\n    let isMounted = true;\n    const seenTeams = new Map();\n\n    const fetchSquads = async () => {\n      try {\n        for (const match of seriesMatches) {\n          const seasonId = match.season_id;\n          const teamsToFetch = [match.localteam, match.visitorteam];\n\n          for (const team of teamsToFetch) {\n            if (!seenTeams.has(team.id)) {\n              try {\n                const res = await axios.get(`/api/teams/${team.id}/squad/${seasonId}`);\n                const squadArray = res.data?.data?.squad || [];\n\n                seenTeams.set(team.id, {\n                  ...team,\n                  squad: squadArray,\n                });\n              } catch {\n                seenTeams.set(team.id, {\n                  ...team,\n                  squad: [],\n                });\n              }\n            }\n          }\n        }\n\n        if (isMounted) setTeams(Array.from(seenTeams.values()));\n      } catch (err) {\n        console.error('Error loading squads', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchSquads();\n    return () => {\n      isMounted = false;\n    };\n  }, [seriesMatches, loadingMatches]);\n\n  return (\n    <div>\n      {(loading || loadingMatches) ? (\n        <p>Loading squads...</p>\n      ) : (\n        teams.map((team) => (\n          <div key={team.id} style={{ marginBottom: '20px' }}>\n            <h4>{team.name}</h4>\n            {Array.isArray(team.squad) && team.squad.map((player) => (\n              <div key={player.id}>â€“ {player.fullname}</div>\n            ))}\n          </div>\n        ))\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}